<odoo>
  <template t-name="account.report_invoice_document">
    <t t-call="web.external_layout">
              <t t-set="o" t-value="o.with_context(lang=lang)"/>
                  <br/>
                   <div class="row">
                     <div class="col-xs-5" style="width:55%;" >
                   <div style="font-size:15px;padding-left:15px;;color:black;"> <br/>
                   <strong><h3 style="color:#185693;">
                <span  t-field="o.company_id.name" />
               </h3></strong>
               <div style="font-size:17px;">
                  <t t-if="o.company_id.street"> <b style="font-size:16px;">   <span style="font-size:16px;">Adresse :</span> </b> <span  t-field="o.company_id.street" />  <br/></t>
                  <t t-if="o.company_id.phone"> <b style="font-size:16px;">   <span style="font-size:16px;">TÈl :</span> </b> <span  t-field="o.company_id.phone" /> <br/> </t>
                   <t t-if="o.company_id.email"><b style="font-size:16px;">   <span style="font-size:16px;">E-mail :</span> </b>  <span  t-field="o.company_id.email" /> <br/></t>
                   <t t-if="o.company_id.vat"><b style="font-size:16px;">   <span style="font-size:16px;">M.F </span> </b>  <span  t-field="o.company_id.vat" /> <br/> </t>
                   <t t-if="o.company_id.website"> <b style="font-size:16px;">   <span style="font-size:16px;">Site Web :</span> </b>  <span  t-esc="o.company_id.website [7:]" />  <br/></t>
                 </div>
                 </div>
               </div>
                <div class="col-xs-7" style="width:45%;">
                  <!-- insertion logo -->
                <center>  <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)"  width="230px" height="180px" /> </center>
                  </div>
                  </div>
                  <br/>
                 <div class="row">
                 <div class="col-xs-5"  style="width:50%;">
                   <h3 style="color:#064660;"><b>
                       <br/>  <span>Facture N°  </span>
                       <span t-esc="o.number [4:]"/>
                     </b></h3>

                     <div style="padding-top:1px;padding-bottom:1px;padding-left:20px;font-size:16px;color:black;">
                       <t t-if="o.date_invoice">
                       <div style="font-size:17px;">
                         <strong style="font-size:17px;color:black;" >Date Facture: </strong>
                         <span t-field="o.date_invoice" />
                         </div>
                     </t>
                   <div name="payment_term">
                   </div>
                     <t t-if="o.date_due">
                     <strong style="font-size:14px;color:black;">Date d'échéance:</strong>
                     <span t-field="o.date_due"></span>
                   </t>
                 </div>
                 </div>
                   <div class="col-xs-7"  style="width:50%;">
                <div class="raw" style="border:1px solid black;padding-top:15px;padding-bottom:20px;padding-left:8px;">
                <!-- information Client -->
                <h4><center> Info Client </center></h4>
                <div style="font-size:20px;padding-left:15px;;color:black;">
                  <b> <span  t-field="o.partner_id.name" /> </b>
                </div>
                <table style="border-color: rgba(255,255,255,255); " >
                  <t t-if="o.partner_id.street">
                <tr>
                <td style="border-color: rgba(255,255,255,255);padding-left:17px;font-size:17px;color:black;" > Adresse</td>
                 <td style="border-color: rgba(255,255,255,255);padding-left:7px;font-size:17px;color:black; " >:  </td>
                 <td style="border-color: rgba(255,255,255,255);padding-left:5px;font-size:17px;color:black; " >   <span  t-field="o.partner_id.street" /></td>
                 <td style="border-color: rgba(255,255,255,255); " ></td>
               </tr>
             </t>
             <t t-if="o.partner_id.phone">
               <tr>
                <td style="border-color: rgba(255,255,255,255);padding-left:17px;font-size:17px;color:black;" > Téléphone</td>
                <td style="border-color: rgba(255,255,255,255); padding-left:7px;font-size:17px;color:black;" >:  </td>
                <td style="border-color: rgba(255,255,255,255);padding-left:5px;font-size:17px;color:black; " > <span  t-field="o.partner_id.phone" /></td>
                <td style="border-color: rgba(255,255,255,255); " ></td>
              </tr>
            </t>
            <t t-if="o.partner_id.email">
              <tr>
                <td style="border-color: rgba(255,255,255,255);padding-left:17px;font-size:17px;color:black;" > E-mail </td>
             <td style="border-color: rgba(255,255,255,255); padding-left:7px;font-size:17px;color:black;" >:  </td>
                <td style="border-color: rgba(255,255,255,255);padding-left:5px;font-size:17px;color:black; " ><span  t-field="o.partner_id.email" /></td>
                <td style="border-color: rgba(255,255,255,255); " ></td>
              </tr>
            </t>
            <!-- Pour Client STE Gazzeh -->

            <t t-if="o.partner_id.vat">
              <tr>
                <td style="border-color: rgba(255,255,255,255);padding-left:17px;font-size:17px;color:black;" > MF / CIN : </td>
             <td style="border-color: rgba(255,255,255,255);padding-left:7px; font-size:17px;color:black;" >:  </td>
                <td style="border-color: rgba(255,255,255,255);padding-left:5px;font-size:17px;color:black; " ><span  t-field="o.partner_id.vat" /></td>
                <td style="border-color: rgba(255,255,255,255); " ></td>
              </tr>
            </t>
            <!-- <t t-if="o.partner_id.vat">
              <tr>
                <td style="border-color: rgba(255,255,255,255);padding-left:17px;font-size:17px;color:black;" > MF / CIN : </td>
             <td style="border-color: rgba(255,255,255,255);padding-left:7px; font-size:17px;color:black;" >:  </td>
                <td style="border-color: rgba(255,255,255,255);padding-left:5px;font-size:17px;color:black; " ><span  t-field="o.partner_id.vat" /></td>
                <td style="border-color: rgba(255,255,255,255); " ></td>
              </tr>
            </t> -->

                </table>
              </div>
              </div>
              </div>
              <br/>

              <div class="page">
                  <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>
                  <table class="table table-sm o_main_table" name="invoice_line_table">
                      <thead>
                          <tr>
                              <!-- TODO: remove in master -->
                              <t t-set="colspan" t-value="6"/>
                              <th name="th_description" class="text-left"><span style="font-size:16px;"><center>Description</center></span></th>
                          <!-- <th name="th_source" class="d-none text-left"><span><center>Source Document </center></span></th> -->
                              <th name="th_quantity" class="text-right"><span style="font-size:16px;"><center> QTE </center></span></th>
                              <th name="th_priceunit" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span style="font-size:16px;"><center>Prix Unit</center></span></th>
                              <th name="th_price_unit" t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                  <span style="font-size:16px;"><center>Rem.(%)</center></span>
                                  <!-- TODO: remove in master -->
                                  <t t-set="colspan" t-value="colspan+1"/>
                              </th>
                                      <!-- Commenter Pour Client Gazzeh  -->
                              <th name="th_taxes" t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span style="font-size:16px;"><center>TVA</center></span></th>

                              <th name="th_subtotal" class="text-right">
                                  <span groups="account.group_show_line_subtotals_tax_excluded"><center style="font-size:16px;">MONTANT HT</center></span>
                                  <span groups="account.group_show_line_subtotals_tax_included"><center style="font-size:16px;">Total Price</center></span>
                              </th>
                          </tr>
                      </thead>
                      <tbody class="invoice_tbody">
                          <t t-set="current_subtotal" t-value="0"/>

                          <t t-foreach="o.invoice_line_ids" t-as="line">

                              <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                              <t t-set="current_subtotal" t-value="current_subtotal + line.price_total" groups="account.group_show_line_subtotals_tax_included"/>

                              <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                  <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                      <td name="account_invoice_line_name" style="font-size:16px;"><span t-field="line.name"/></td>

                                      <td class="d-none"><span t-field="line.origin"/></td>
                                      <td class="text-right">
                                          <center style="font-size:16px;"><span t-field="line.quantity"/></center>
                                      </td>
                                      <td t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="font-size:16px;">
                                          <span t-field="line.price_unit"/>
                                      </td>
                                      <td t-if="display_discount" t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="font-size:16px;">
                                          <span t-field="line.discount"/>
                                      </td>

                                      <!-- Cpmmenter Pour Client Gazzeh  -->

                                      <td t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}" style="font-size:16px;">
                                          <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.invoice_line_tax_ids))"/>
                                      </td>

                                      <td class="text-right o_price_total" style="font-size:16px;">
                                          <span t-field="line.price_subtotal" groups="account.group_show_line_subtotals_tax_excluded"/>
                                          <span t-field="line.price_total" groups="account.group_show_line_subtotals_tax_included"/>
                                      </td>
                                  </t>
                                  <t t-if="line.display_type == 'line_section'">
                                      <td colspan="99" style="font-size:16px;">
                                          <span t-field="line.name"/>
                                      </td>
                                      <t t-set="current_section" t-value="line"/>
                                      <t t-set="current_subtotal" t-value="0"/>
                                  </t>
                                  <t t-if="line.display_type == 'line_note'">
                                      <td colspan="99" style="font-size:16px;">
                                          <span t-field="line.name"/>
                                      </td>
                                  </t>
                              </tr>
                              <t t-if="current_section and (line_last or o.invoice_line_ids[line_index+1].display_type == 'line_section')">
                                  <tr class="is-subtotal text-right">
                                      <td colspan="99" style="font-size:16px;">
                                          <strong class="mr16">Total HT</strong>
                                          <span t-esc="current_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                      </td>
                                  </tr>
                              </t>
                          </t>
                          <t t-foreach="o.invoice_line_ids" t-as="line">
                          <t t-foreach="range(max(9-len(o.invoice_line_ids),0))" t-as="line">
                           <tr>
                               <td t-translation="off">&amp;nbsp;</td>
                               <td/>
                               <td/>
                               <td/>
                               <td/>
                           </tr>
                         </t>
                         </t>
                      </tbody>
                  </table>
                  <div class="row">

                   <div class="col-xs-1" style="width:2%;">
                  </div>

                    <div class="col-xs-5" style="width:55%;">

                      <table style="width:100%;border: 1px solid !important;">
                              <thead>
                                  <tr style= "font-size:15px; color: black;">
                                    <th ><center><b>TVA %  </b></center></th>
                                    <th><center><b>Base H.T  </b></center></th>
                                    <th ><center><b>Mt TVA  </b></center></th>

                                  </tr>
                              </thead>
                              <tbody style= "font-size:15px; color: black;">
                                <t t-foreach="o.amount_by_group" t-as="amount_by_group">
                                  <tr>
                                    <td style= "text-align:center !important;background-color: white; !important;border: 1px solid !important;font-size:14px; color: black;">
                                      <span t-esc="amount_by_group[0]"/>
                                    </td>
                                    <td style= "text-align:center !important;background-color: white; !important;border: 1px solid !important;font-size:14px; color: black;">
                                      <span> <t t-esc="amount_by_group[4]"/> </span>
                                   </td>
                                    <td style= "text-align:center !important;background-color: white; !important;border: 1px solid !important;font-size:14px; color: black;">
                                      <span t-esc="amount_by_group[3]"/>
                                    </td>
                                  </tr>
                                </t>
                              </tbody>
                                </table>

                      </div>

                      <div class="col-xs-1" style="width:3%;">
                      </div>

                      <div class="col-xs-5" style="width:40%;">
                        <table style="width:100%;">
                        <tr style= "font-size:16px; color: black;">
                          <td style="background-color:white">
                          <div class="row" >
                            <strong class="col-xs-7" style="color:black !important;padding-left:10px; margin-left:10px !important; ">
                              Total HT :
                            </strong>
                            <span class="col-xs-4" t-field="o.amount_untaxed"  style="color:black !important"> </span>
                          </div>

                          <!-- Commenter Pour Client Gazzeh -->
                          <!-- <div class="row" >
                            <strong class="col-xs-7" style="color:black !important ;padding-left:10px; margin-left:10px !important ">Total TVA :
                            </strong>
                            <span class="col-xs-4" t-field="o.amount_tax" style="color:black !important" > </span>
                        </div> -->
                        <div class="row" >
                          <strong class="col-xs-7" style="color:black !important;padding-left:10px; margin-left:10px !important ">Timbre :
                          </strong>
                          <span class="col-xs-4" t-field="o.timbre" style="color:black !important"> </span>
                          </div>
                          <div class="row" >
                            <strong class="col-xs-7" style="color:black !important;padding-left:10px; margin-left:10px !important ">Total TTC :
                            </strong>
                              <span class="col-xs-4" t-field="o.amount_total" style="color:black !important"> </span>
                            </div>
                          </td>
                        </tr>
                    </table>
                  </div>

                </div>

              <br/>
              <p  style= "font-size:18px;">
               <strong> Arrété la présente facture à la somme de : </strong>
               <span t-if="user.company_id.currency_id" t-esc="user.company_id.currency_id.amount_to_text(o.amount_total)"/>
             </p>
                  <div class="row" >
                    <div class="col-xs-9"  style="width:80%;">
                    </div>
                    <div class="col-xs-3" style=" font-size:12px;padding-right:11px;width:19%;">
                        <p> <center   style="font-size:16px"> Signature et Cachet</center></p>
                    </div>
                  </div>
              </div>
              <div class="footer">
                <div class="text-center" style="border-top: 1px solid Gainsboro;">
                  <ul class="list-inline" name="financial_infos">
                   <br/>
                      <li>
                        <center>
                        <h4> <b> <span  t-esc="o.company_id.name" /> </b> </h4>
                          <b> TÈl : </b>
                          <span  t-field="o.company_id.phone" /> -
                          <b>  MF :</b>
                          <span  t-field="o.company_id.vat" />
                          <b> - E-mail :</b>
                          <t t-if="o.company_id.email">
                          <span  t-field="o.company_id.email" />
                          </t>
                          <h5 style="color:#185693;">
                          <t t-if="o.company_id.website">
                          <b>  <span  t-esc="o.company_id.website [7:]" /></b>
                          </t>
                          </h5>
                          <br/>
                        </center>
                     </li>
                  </ul>
              </div>
            </div>
          </t>
    </template>
    </odoo>
