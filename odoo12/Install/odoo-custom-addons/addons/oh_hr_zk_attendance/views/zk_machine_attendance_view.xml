<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

      <!-- iherit departement -->
    <record id="inherited_view_department_form" model="ir.ui.view">
        <field name="name">inherited_hr.department.form</field>
        <field name="model">hr.department</field>
        <field name="inherit_id" ref="hr.view_department_form"/>
        <field name="arch" type="xml">
          <xpath expr="field[@name='parent_id']" position="after">
              <field name="time_in_dep"/>
              <field name="time_in_dep"/>
          </xpath>
        </field>
    </record>

      <!-- iherit employee -->
    <record id="inherited_view_employee_form" model="ir.ui.view">
        <field name="name">inherited_hr.employee.form</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
          <xpath expr="field[@name='name']" position="after">
            <h1>  <field name="matricule"/> </h1>
          </xpath>
        </field>
    </record>


	<!-- Customize Attendance Report -->
    <record id="inherited_view_attendance_tree" model="ir.ui.view">
        <field name="name">inherited_hr.attendance.tree</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.view_attendance_tree"/>
        <field name="arch" type="xml">
            <tree position="inside">
                <field name="heures_travil" string="Heures travaillées" type="measure"/>
                <field name="minutes_travil" string="Minutes travaillées"/>
                <field name="heures_absences" string="Heures Absences" type="measure"/>
                <field name="sup_hours" string="Heures Supp" type="measure"/>
            </tree>
        </field>
    </record>
     <record id="inherited_hr_attendance_view_form" model="ir.ui.view">
        <field name="name">inherited_hr_attendance_view_form</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.hr_attendance_view_form"/>
        <field name="arch" type="xml">
            <sheet position="before">
                <header>
                    <button name="calculate_attendance" string="Calculer feuille" type="object" />
                </header>
            </sheet>
            <sheet position="inside">
              <group>
                <field name="date" string="Date" />
                <field name="time_in" string="Entrée" />
                <field name="time_out" string="Sortie" />

              </group>
                <group>
                    <field name="heures_travil" string="Heures travaillées" />
                    <field name="minutes_travil" string="Minutes travaillées" />
                    <field name="heures_absences" string="Heures Absences" />
                    <field name="sup_hours" string="Heures Supp" />

                </group>
            </sheet>
        </field>
    </record>


    <!-- pivot Adds -->
        <record id="inherit_hr_attendance_pivot_view" model="ir.ui.view">
            <field name="name">hr.attendance.inherit.pivot</field>
            <field name="model">hr.attendance</field>
            <field name="inherit_id" ref="hr_attendance.hr_attendance_view_pivot" />
            <field name="arch" type="xml">
                <xpath expr="field[@name='worked_hours']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="field[@name='check_in']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <pivot position="inside">

                <field name="date" interval="day" type="row"/>
                <!--<field name="check_in" type="col"/>-->
                <!--<field name="worked_hours" type="measure"/>-->
                <field name="heures_travil" string="Heures travaillées" type="measure"/>
                <field name="minutes_travil" string="Minutes travaillées"/>
                <field name="heures_absences" string="Heures Absences"  type="measure"/>
                <field name="sup_hours" string="Heures Supp"  type="measure"/>
                </pivot>


            </field>
        </record>


      <!-- search view -->
      <record id="hr_attendance.hr_attendance_view_filter" model="ir.ui.view">
          <field name="name">hr.attendance.inherit.search</field>
          <field name="model">hr.attendance</field>
          <field name="arch" type="xml">
            <search string="Hr Attendance Search">
                <field name="employee_id"/>
                <field name="department_id"/>
                <filter string="My Attendances" name="myattendances" domain="[('employee_id.user_id.id', '=', uid)]"/>
                <separator/>
                <!-- <filter name="check_in_filter" string="Check In Date" date="check_in"/> -->
                <!-- <filter string="No Check Out" name="nocheckout" domain="[('check_out', '=', False)]"/> -->
                <group expand="0" string="Group By">
                   <filter name="employee" string="Employee" context="{'group_by':'employee_id'}"/>
                  <separator/>
                <!-- <filter name="groupby_name" string="Check In Date" context="{'group_by': 'check_in'}"/>
                    <filter name="groupby_check_out" string="Check Out Date" context="{'group_by': 'check_out'}"/> -->
              </group>
            </search>
          </field>
      </record>

    <!-- <record id="inherited_hr_attendance_view_filter" model="ir.ui.view">
        <field name="name">inherited_hr_attendance_view_filter</field>
        <field name="model">hr.attendance</field>
        <field name="inherit_id" ref="hr_attendance.hr_attendance_view_filter"/>
        <field name="arch" type="xml">
            <search position="inside">
                <group expand="0" string="Group By">
                    <separator/>
                	<filter name="date" string="Date" context="{'group_by':'check_in:day'}"/>

                </group>
            </search>
        </field>
    </record> -->



     <!-- Société Adds -->
        <record id="inherit_company_view" model="ir.ui.view">
            <field name="name">res.company.inherit.form</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form" />
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/notebook/page/group/group[2]" position="inside">
                    <field name="deduct_sunday_in_leave" string="Samedi" />
                    <field name="deduct_saturday_in_leave" string="Dimanche" />
                </xpath>
            </field>
        </record>

    <!-- <record id="view_zk_report_daily_attendance_search" model="ir.ui.view">
        <field name="name">zk.report.daily.attendance.search</field>
        <field name="model">zk.report.daily.attendance</field>
        <field name="arch" type="xml" >
            <search string="inside">
                <filter icon="terp-stock_align_left_24" string="My Attendance" name="my_attendance" domain="[('name.user_id.id', '=', uid)]" />
                <filter name="today" string="Today" domain="[('punching_time', '&gt;=', datetime.datetime.now().replace(hour=0, minute=0, second=0)),('punching_time', '&lt;=', datetime.datetime.now().replace(hour=23, minute=59, second=59))]" />
                <filter string="Current Month" name="month" domain="[('punching_time', '&gt;=', datetime.datetime.now().strftime('%Y-%m-01'))]" />
                <separator/>

                <field name="name" string="Name"/>
            </search>
        </field>
    </record> -->

    <record id="view_zk_report_daily_attendance_tree" model="ir.ui.view">
        <field name="name">zk.report.daily.attendance.tree</field>
        <field name="model">zk.report.daily.attendance</field>
        <field name="arch" type="xml" >
            <tree string="Attendance" create="false" delete="false" colors="green:punch_type in ('0');red:punch_type in ('1');">
                <field name="punching_day"/>
                <field name="name"/>
                <field name="punch_type"/>
                <field name="attendance_type"/>
                <field name="punching_time"/>
                <field name="address_id"/>
            </tree>
        </field>
    </record>

    <record id="action_zk_report_daily_attendance" model="ir.actions.act_window">
        <field name="name">Attendance Analysis</field>
        <field name="res_model">zk.report.daily.attendance</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree</field>
        <field name="context">{'search_default_my_attendance':1}</field>
        <!-- <field name="search_view_id" ref="view_zk_report_daily_attendance_search" /> -->
    </record>



    <menuitem id="menu_zk_attendance_view" name="Attendance log" action="action_zk_report_daily_attendance" parent="zk_machine_menu"
              sequence="2" groups="hr_attendance.group_hr_attendance_user"/>


      <record id="hr_attendance_etat_form_view" model="ir.ui.view">
          <field name="name">hr.attendance.etat</field>
          <field name="model">hr.attendance.etat</field>
          <field name="arch" type="xml">
            <form string="Etat Presences">
              <sheet>
                 <group>
             <div class="row">
               <div class="col">
                 <span>  De:  </span>
               </div>
               <div class="col">

                 <span>  A:   </span>
               </div>

             </div>
             <br/>

             <div class="row">
               <div class="col">
                 <field name="check_de"/>
               </div>
               <div class="col">

                 <field name="check_out"/>
               </div>

             </div>
          </group>

               </sheet>
               <footer>
          <button name="Etat_Presences" string="Générer" type="object" class="oe_highlight"/>

          <button string="Cancel" class="btn btn-default" special="cancel"/>
        </footer>

           </form>

          </field>
      </record>
      <record id="hr_attendance_etat_presence_action" model="ir.actions.act_window">
        <field name="name">Etat Presences</field>
        <field name="res_model">hr.attendance.etat</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
      </record>

      <menuitem id="etat_presence_menu" name="Etat Presences"
        parent="hr_attendance.menu_hr_attendance_manage_attendances"
       groups="hr_attendance.group_hr_attendance_user" action="hr_attendance_etat_presence_action"/>

  </data>
</odoo>
