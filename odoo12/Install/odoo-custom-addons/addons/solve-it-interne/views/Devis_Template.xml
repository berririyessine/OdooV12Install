<odoo>
<template t-name="sale.report_saleorder_document">
    <t t-call="web.external_layout">
        <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>

        <div class="page">
            <div class="oe_structure"/>
            <!-- debut entet -->
                <div class="row" style="padding-left:19px;">
                  <div class="col-xs-5" style="margin-right:10px;">
                    <!-- Information STE -->
                    <div class="row">
                      <br/>
                          <div>
                        <h3>  <span  t-field="doc.company_id.name" /></h3>
                          </div>
                          <div>
                          <b>   <span>Adresse :</span> </b> <span  t-field="doc.company_id.street" />
                          </div>
                          <div>
                          <b>   <span>TÈl :</span> </b> <span  t-field="doc.company_id.phone" />
                          </div>
                          <div>
                          <b>   <span>E-mail :</span> </b>  <span  t-field="doc.company_id.email" />
                          </div>
                          <div>
                      <b>    <span>M.F :</span> </b>  <span  t-field="doc.company_id.vat" />
                          </div>
                          <div>
                      <b>       <span>RIB :</span>    </b>  <span  t-field="doc.company_id.RIB" />
                          </div>
                    </div>
                    <br/>
                      <!-- insertion tableau 2 ligne -->
                      <div class="row" style="border:1px solid black; padding-top:1px;padding-bottom:1px;padding-left:8px;border-color: rgba(255,255,255,.5); " >
                        <!-- Num Devis -->
                        <div style="padding-top:1px;padding-bottom:1px;padding-left:8px;">
                          <h2><b>
                            <t t-if="not (env.context.get('proforma', False) or is_pro_forma)">
                              <span>Devis N°  </span>
                            </t>
                            <!-- <t t-if="env.context.get('proforma', False) or is_pro_forma">
                              <span>Pro-Forma Invoice # </span>
                            </t> -->
                            <span t-esc="doc.name [4:]"/>
                          </b></h2>
                        </div>
                      </div>
                      <div class="row" >
                        <!-- Du & Validité de loffre -->
                        <div style="padding-left:10px;border:1px solid black;border-color: rgba(255,255,255,.5);">
                          <div class="row">
                            <div>
                                <div style="padding-top:1px;padding-bottom:1px;padding-left:20px;">
                              <div t-if="doc.date_order and doc.state in ['draft','sent']">
                                <strong>Date: </strong>
                              <span t-esc="datetime.datetime.strptime(doc.date_order, '%Y-%m-%d %H:%M:%S').strftime('%d/%m/%Y')"/>
                              <!-- <span t-field="doc.date_order"> Date : </span> -->
                              </div>
                              <div name="payment_term">
                              </div>
                              <div t-if="doc.validity_date and doc.state in ['draft', 'sent']">
                                <strong>Validité de l'offre:</strong>
                                <span t-field="doc.validity_date"> Validité de l'offre: </span>
                              </div>
                            </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
                    <div class="col-xs-7"  style="width:57%;">
                      <div class="row">
                        <!-- insertion logo -->
                    <center>  <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)"  width="400px" height="150px" /> </center>

                        </div>
                        <br/>
                      <div class="raw" style="border:1px solid black;padding-top:15px;padding-bottom:20px;padding-left:8px;">
                      <!-- information Client -->
                      <div style="font-size:20px;">
                        <b> <span style="padding-left:15px;"> <span  t-field="doc.partner_id.name" /></span></b>

                      </div>
                      <table >
                      <tr>
                      <td style="padding-left:17px;"> Adresse</td>

                       <td style="padding-left:10px;padding-right:10px;">:  </td>

                       <td>   <span  t-field="doc.partner_id.street" /></td>
                     </tr>
                     <tr>
                      <td style="padding-left:17px;" > Téléphone</td>
                      <td style="padding-left:10px;padding-right:10px;">:  </td>
                      <td> <span  t-field="doc.partner_id.phone" /></td>
                    </tr>
                    <tr>
                      <td style="padding-left:17px;"> E-mail </td>
                      <td style="padding-left:10px;padding-right:10px;">:  </td>
                      <td>  <span  t-field="doc.partner_id.email" /></td>
                      </tr>
                      <tr>
                      <td style="padding-left:17px;"> M.F </td>
                      <td style="padding-left:10px;padding-right:10px;">:  </td>
                      <td>  <span  t-field="doc.partner_id.vat" /></td>
                    </tr>
                    <tr>
                      <td style="padding-left:17px;"> RIB </td>
                      <td style="padding-left:10px;padding-right:10px;">:  </td>
                      <td>  <span  t-field="doc.partner_id.RIB" /></td>
                    </tr>
                      </table>
                    </div>
                  </div>
                </div>
            <!-- fin entete    -->
            <br></br>
            <!-- Is there a discount on at least one line? -->
            <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>


            <t t-foreach="doc.order_lines_layouted()" t-as="page">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <!-- <th class="text-right" style="border:1px solid black; text-align:center;">Référence</th> -->
                            <th class="text-right" style="border:1px solid black; text-align:center;">Désignation</th>
                            <th class="text-right" style="border:1px solid black; text-align:center;">Qté</th>
                            <th class="text-right" style="border:1px solid black; text-align:center;">Unit Price</th>
                            <th t-if="display_discount" class="text-right" style="border:1px solid black; text-align:center;" groups="sale.group_discount_per_so_line" >Disc.(%)</th>
                            <th class="text-right" style="border:1px solid black; text-align:center;">TVA</th>
                            <th class="text-right" style="border:1px solid black; text-align:center;" groups="sale.group_show_price_subtotal" >Montant HT</th>
                            <th class="text-right price_tax_included" groups="sale.group_show_price_total" style="border:1px solid black; text-align:center;">Total Price</th>
                        </tr>
                   </thead>
                   <tbody class="sale_tbody" style="border:1px solid black;" >
                        <t t-foreach="page" t-as="layout_category" style="border:1px solid black;">

                            <t t-if="layout_category_size &gt; 1 or page_size &gt; 1" groups="sale.group_sale_layout" style="border:1px solid black;">
                                <tr class="active" style="border:1px solid black;">

                                    <td colspan="7" style="border:1px solid black;">&amp;bull;
                                        <span t-esc="layout_category['name']"/>

                                    </td>
                                </tr>
                            </t>

                            <!-- Lines associated -->
                            <t t-foreach="layout_category['lines']" t-as="l" style="border:1px solid black;">
                                <tr>
                                  <!-- <td class="text-right" style="border:0px;text-align: left;text-align:center;">
                                 <span t-field="l.product_id.default_code"/></td> -->

                                  <td style="border:0px;border-left:1px solid black!important;"><span t-field="l.product_id.name"/></td>
                                    <td class="text-right" style="border:0px;border-left:1px solid black!important; text-align:center;">
                                        <span t-field="l.product_uom_qty"/>
                                        <span t-field="l.product_uom" groups="product.group_uom"/>
                                    </td>
                                    <td class="text-right" style="border:0px;border-left:1px solid black!important;text-align:center;">
                                        <span t-field="l.price_unit"/>
                                    </td>
                                    <td t-if="display_discount" class="text-right" groups="sale.group_discount_per_so_line" style="border:0px;border-left:1px solid black!important;text-align:center;">
                                        <span t-field="l.discount"/>
                                    </td>
                                    <td class="text-right" style="border:0px;border-left:1px solid black!important;text-align:center;">
                                        <span t-esc="', '.join(map(lambda x: (x.description or x.name), l.tax_id))"/>
                                    </td>
                                    <td class="text-right" groups="sale.group_show_price_subtotal" style="border:0px;border-left:1px solid black!important;">
                                        <span t-field="l.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </td>
                                    <td class="text-right" groups="sale.group_show_price_total" style="border:0px;border-left:1px solid black!important;">
                                        <span t-field="l.price_total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                </table>
                <div style="margin-top:-20px;margin-left:15px;margin-right:15px;">
                    <div class="row">
                      <div  class="col-xs-9" style="border:1px solid black;text-align: right;">
                        <td><strong>TOTAL HT</strong></td>
                      </div>
                      <div  class="col-xs-3" style="border:1px solid black;text-align: right;">
                        <tr class="border-black" style="border-bottom:1px solid #dddddd;">

                            <td class="text-right">
                                <span t-field="doc.amount_untaxed" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                            </td>
                        </tr>
                    </div>
                      <div  class="col-xs-9" style="border:1px solid black;text-align: right;">
                        <td>
                          <strong>  <span>TOTAL TVA</span></strong>
                        </td>
                      </div>
                      <div  class="col-xs-3" style="border:1px solid black;text-align: right;">
                        <tr class="border-black" style="border-bottom:1px solid #dddddd;">

                            <td class="text-right">
                                <span t-field="doc.amount_tax" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                            </td>
                        </tr>
                    </div>
                      <div  class="col-xs-9" style="border:1px solid black;text-align: right;">
                        <td><strong>TOTAL TTC</strong></td>
                      </div>
                <div  class="col-xs-3" style="border:1px solid black;text-align: right;">
                  <tr class="border-black" style="border-bottom:1px solid #dddddd;">

                      <td class="text-right">
                          <span t-field="doc.amount_total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                      </td>
                  </tr>
              </div>
            </div>

            <div class="row" style="padding-left:24px; padding-right:24px; border:1px solid black;">
              <div  class="col-xs-9">
                <td style="font-size:18px;">
                  <br/>
                  <strong>Arrété le présent devis à la somme de : </strong>  <span t-esc="doc.get_amount_letter()"/><span> . </span>
                  <br/>
                </td>
              </div>
              <div  class="col-xs-3">
                <td><center>
                  <!-- <strong> <span t-esc="doc.company_id.currency_id.name"/> </strong> -->
                  <br/><br/> <strong> Frais de douane et TVA inclus </strong> </center>
              </td>
              </div>
            </div>

            <div class="row" style="padding-left:14px; padding-right:14px; border:1px solid black;">
              <div  class="col-xs-12">
                <td><strong><b>Conditions de ventes</b></strong></td>
              </div>
            </div>

            <div class="row">
              <div  class="col-xs-3" style="border:1px solid black;">
                <td style="border:1px solid black;">
                  Délais de livraison :
                  <br> Mode de règlement : </br>
                  <br> Garantie : </br>
                </td>
              </div>
        <div  class="col-xs-9" style="border:1px solid black;">
          <tr class="border-black" style="border-bottom:1px solid #dddddd;">

            <td>
              <span t-field="doc.liv_date"/>
              <br><span t-field="doc.reg_mode"/> </br>
              <br> <span t-field="doc.grt"/></br>
              <!-- <br><span t-field="doc.user_id"/></br> -->
              <br> </br>
            </td>
          </tr>
      </div>
    </div>
  </div>


                <t t-if="page_index &lt; page_size - 1" groups="sale.group_sale_layout">
                    <p style="page-break-before:always;"> </p>
                </t>
            </t>


            <div class="oe_structure"/>

            <div class="footer last-page">
            <div class="text-center" style="border-top: 1px solid Gainsboro;">
                    <ul class="list-inline" name="financial_infos">
                      <br/>
                     <center>  <span  t-field="doc.company_id.name" /> </center>
                     <br/>
                        <li><center> TÈl : <span  t-field="doc.company_id.phone" /> - E-mail : <span  t-field="doc.company_id.email" />-
                        RIB :
                        <span  t-field="doc.company_id.RIB" />
                         </center></li>
                    </ul>

                </div>
            </div>
        </div>


    </t>

</template>


</odoo>
